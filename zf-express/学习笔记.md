## express有什么优势 如何起动简单的服务？
- 1、express内置路由模块，可以方便使用
- 2、扩展了 req res 方便对于http的使用和管理
- 3、内部有中间件机制，方便对于功能的扩展

```js
const express = require("express")

const app = express()

app.get("/",function(req,res)  {
  res.end("home")
})

app.get("/login",function(req,res)  {
  res.end("login")
})
// 匹配所有，上面的路由都匹配不到，就会走到这里
app.all("*",function(req,res)  {
  res.end("404")
})

app.listen(3000)
```

## 我们在require express 的时候 是如何运转的？
- 1 首先会查找node_modules里面的main字段对应的入口, 发现并没有这个字段。
- 2 那就继续找 express 目录中的 index.js 发现里面有这样一行代码：module.exports = require('./lib/express')
- 3 继续查找，找到lib文件夹里面的express.js 这是express 的核心代码。

## 逐步实现express的源码实现思路解析
- 1 首先 创建服务的时候，是通过执行一个函数来实现的 返回的app 具有 get、listen方法。我们暂且认为函数执行之后返回的是一个 对象，这些方法是挂载在对象上面的。
- 2 事先定义了一个路由，这个路由中不仅仅存放了方法，还是存放了对应当前路由的回调函数。这个回调函数，在用户真正的匹配到的时候执行。
- 3 执行的顺序是先执行 get 方法，每执行一次get方法，就会向路由系统中注册一个对应的路由对象。
- 4 然后执行listen的时候,首先是借助原生的http模块创建服务，遍历这个路由数组，匹配到了之后执行回调方法。