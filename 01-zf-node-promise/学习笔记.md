- 基本的promsie已经写完了，其中，处理的都是同步的问题。但是我们在使用promsie处理问题的时候，大多数时候都是解决异步的问题的。

- 如果遇到异步的问题该如何解决？
  
```js
const Promise = require("./source/2.promsie.js")
let promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("成功")
  }, 1000)
})
// 当用户调用then方法的时候，此时promsie可能为等待态。
// 先暂存起来，因为后续可能会调用resolve和reject
// 等会再触发对应的onfullfilled和 onRejected
promise.then(
  (value) => {
    console.log("success1", value)
  },
  (reason) => {
    console.log("error", reason)
  }
)
promise.then(
  (value) => {
    console.log("success2", value)
  },
  (reason) => {
    console.log("error", reason)
  }
)
```
上述代码中, 在执行器executor中等待1s中的时间才执行resolve,但是此时then方法已经执行完毕了，并且我们在第一版的prpmise中并没有针对 pending这种状态，做处理。这里需要处理一下。针对这种情况，我们可以设计两个队列，存放pending状态下的函数，成功的时候将成功队列里面的函数全部执行，失败的时候将失败队列里面的函数全部执行。

应用实例：在甜橙金融的时候，所有的交互都是异步得到的，基于这样的考虑，都是基于promise 封装的，在确定拿到结果之后，将结果resolve出去。

因为是基于promise封装的，所以调用方法的时候拥有 then 方法。在then中做一些拿到数据之后的事情。

通过不断的学习，真的加深了对于异步的思考。







